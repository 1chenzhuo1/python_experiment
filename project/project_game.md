# 《Python程序设计基础》程序设计作品说明书

题目： 外星人入侵游戏

学院： 21计科

姓名： 陈卓

学号： B20210302306

指导教师： 周景

起止日期：2023.11.10-2023.12.10

## 摘要

_这是一款基于python的射击游戏。玩家通过键盘或鼠标控制宇航员的移动，实现上、下、左、右的方向控制。玩家可通过按键或点击屏幕进行射击，尝试消灭逼近的外星人，并记录分数。_

关键词：Python，射击，游戏

## 第1章 需求分析

### 1.1系统需求分析

· 游戏玩法：
    玩家通过键盘或鼠标控制宇航员的移动，实现上、下、左、右的方向控制。
    玩家可通过按键或点击屏幕进行射击，尝试消灭逼近的外星人，并记录分数。
· 游戏设计：
    游戏将生成外星人，它们以不同的速度和路径向玩家发起进攻。
    屏幕上会在随机位置出现随机个数的星星。
· 游戏功能：
    游戏将记录最高分数，并将分数保存到文件。
    随着时间的推移，外星人的速度将逐渐增加，提高游戏难度。

### 1.2系统功能

· 游戏界面：创建游戏界面，包括背景图片、游戏元素（如星星、的外星人）和得分板。  
· 游戏元素移动：实现游戏元素（外星人）的随机移动。 
· 宇航员移动：实现宇航员的上下左右移动，并检测是否碰到游戏元素。  
· 射击功能：实现玩家通过按键或点击屏幕进行射击的功能，并检测子弹是否击中游戏元素。  
· 分数统计：实时统计玩家分数，并显示在得分板上
· 最高分数保存：将玩家当前最高分数保存在文件中，以便玩家下次游戏时可以查看。
· 游戏难度增加：随着玩家分数的增加，逐渐增加游戏难度，如增加的外星人种类、速度和数量等。

### 1.3可以帮助用户解决以下问题

· 放松身心：通过玩这个游戏，玩家可以放松身心，减轻压力，并获得一定的快乐和成就感。 
· 提高反应速度：游戏需要玩家快速反应和准确地操作，这有助于提高玩家的反应速度和专注力。 
· 增强手眼协调能力：游戏需要玩家同时关注屏幕上的游戏元素和操作宇航员，这有助于增强玩家的手眼协调能力。  
· 培养逻辑思维：游戏需要玩家不断思考和分析，尝试找到最佳的解决方案，这有助于培养玩家的逻辑思维能力和分析能力。

## 第2章 分析与设计

### 2.1 系统架构

2.1.1 游戏引擎选择
在系统架构中，首要的决策是选择合适的游戏引擎。我们使用Pygame作为游戏的基础框架，因为它是一个轻量级且易于学习的2D游戏开发引擎，适合本项目的规模和要求。

2.1.2 模块划分
系统模块的划分对于项目的组织和维护至关重要。以下是基本模块的划分：

1. 游戏引擎模块： 负责与Pygame引擎的交互，包括游戏初始化、主循环、事件处理等。
2. 玩家控制模块： 处理玩家输入，控制玩家飞船的移动和射击。
3. 外星人模块： 管理外星人的生成、移动规律，以及与玩家飞船的交互。
4. 游戏逻辑模块： 处理游戏的核心逻辑，包括碰撞检测、分数计算等。
5. 界面显示模块： 处理游戏画面的渲染，包括玩家飞船、外星人、分数显示等。

2.1.3 数据管理
分数管理： 设计一个分数管理系统，负责记录和更新玩家的得分。

### 2.2 系统流程

2.2.1 游戏主循环
游戏的主循环是系统最核心的部分，包括以下步骤：

1. 更新玩家控制模块： 根据玩家的输入更新玩家飞船的位置和状态。
2. 更新外星人模块： 处理外星人的生成、移动和可能的攻击。
3. 更新游戏逻辑模块： 执行游戏逻辑，包括碰撞检测、分数计算等。
4. 更新界面显示模块： 根据当前游戏状态更新游戏画面。
5. 检测游戏结束条件： 判断游戏是否结束，例如玩家飞船被摧毁或者外星人到达底部。

### 2.3 系统模块设计

2.3.1 玩家控制模块

1. 键盘输入处理： 监听玩家键盘输入，包括左右移动和射击操作。
2. 玩家飞船移动： 根据键盘输入更新玩家飞船的位置，确保不超出屏幕边界。
3. 射击功能： 处理玩家射击操作，创建子弹并更新其位置。

2.3.2 外星人模块

1. 外星人生成： 设计外星人生成的算法。
2. 外星人移动规律： 定义外星人的移动规律，可以是左右移动，也可以是下降。
3. 外星人与玩家交互： 处理外星人与玩家飞船的交互，例如碰撞检测。

2.3.3 游戏逻辑模块

1. 碰撞检测： 实现玩家飞船和子弹与外星人的碰撞检测。
2. 分数计算： 根据玩家的射击命中和其他表现计算玩家得分。

### 2.4 数据库设计

记录分数

分数数据库表设计： 创建一个表用于存储玩家的分数记录，包括玩家名称和分数。

### 2.5 关键实现细节

外星人生成算法

1. 逐渐增加难度： 设计算法确保随着游戏的进行，外星人的生成和移动速度逐渐增加。
2. 随机生成： 在屏幕上合适的位置随机生成外星人。

## 第3章 软件测试

1. 测试AlienInvasion类的check_keydown_events方法

|\#| 测试目标| 输入 | 预期结果 | 测试结果 |
| --- | --------- | ----- | ---------------- | ----------------- |
| 1 |按下向右键|ai_game 为 AlienInvasion 实例，模拟 KEYDOWN 事件，按下右箭头键|ai_game.ship.moving_right 属性为 True |通过|
| 2 |按下向左键|ai_game 为 AlienInvasion 实例，模拟 KEYDOWN 事件，按下左箭头键|ai_game.ship.moving_left 属性为 True|通过|

2. 测试AlienInvasion类的check_keyup_events方法

|\#| 测试目标| 输入 | 预期结果 | 测试结果 |
| --- | --------- | ----- | ---------------- | ----------------- |
| 1 |松开向右键|ai_game 为 AlienInvasion 实例，模拟 KEYUP 事件，松开右箭头键|ai_game.ship.moving_right属性为False|通过|
| 2 |松开向左键|ai_game 为 AlienInvasion 实例，模拟 KEYUP 事件，松开左箭头键|ai_game.ship.moving_left 属性为 False|通过|

3. 测试settings类

|\#| 测试目标| 输入 | 预期结果 | 测试结果 |
| --- | --------- | ----- | ---------------- | ----------------- |
| 1|测试increase_speed方法|speedup_scale=0.5, score_scale=0.5|expected_ship_speed=0.75，expected_bullet_speed=1.25，expected_alien_speed=0.5，expected_alien_points=25|通过|
| 2 |测试 initialize_dynamic_settings 方法|无|将速度和方向属性重置到默认值|通过|

## 结论

本项目通过实现一个简单的外星人入侵游戏，帮助用户放松身心，提高反应速度、增强手眼协调能力和培养逻辑思维能力。游戏界面简洁明了，操作简单易行，能够满足用户需求。

项目主要实现了以下功能：

1.玩家通过键盘或鼠标控制宇航员的移动和射击功能，实现上、下、左、右的方向控制。
2.玩家可通过按键或点击屏幕进行射击，尝试消灭逼近的外星人，并记录分数。
3.游戏将生成外星人，它们以不同的速度和路径向玩家发起进攻。
4.屏幕上会在随机位置出现随机个数的星星。
5.游戏将记录最高分数，并将分数保存到文件。
6.随着时间的推移，外星人的速度将逐渐增加，提高游戏难度。
项目在实现过程中遇到了一些问题和不足，包括：

1.游戏元素（如星星、的外星人）的随机移动速度较慢，需要优化。
2.子弹击中游戏元素时，碰撞检测效果不佳，需要改进。
3.游戏界面设计不够美观，需要优化。
4.游戏难度增加不够明显，需要调整。
针对这些问题，可以采取以下改进措施：

1.增加游戏元素（如星星、的外星人）的随机移动速度，提高游戏难度。
2.改进子弹击中游戏元素时的碰撞检测效果，使游戏元素被击中后产生相应的特效或反应。
3.重新设计游戏界面，使其更加美观、易操作。
4.根据玩家分数调整游戏难度，如增加的外星人种类、速度和数量等。
综上所述，本项目在实现一个简单的外星人入侵游戏方面取得了较好的成果，但在游戏难度增加、游戏元素移动速度优化和游戏界面设计等方面还需要进一步改进。

## 参考文献

[1] 罗杰斯 K. J., 史密斯 B. E., 施托克斯 D. G. 《Python教程：从入门到实践（第3版）》 O'Reilly Media, 2021.
[2] 朱 Y., 李 W., 李 X. 《Python游戏编程入门：从零级到掌握游戏开发技巧的Python指南》 Tsinghua University Press, 2021.
[3] 陈 S. 《Python游戏编程入门》 Tsinghua University Press, 2021.